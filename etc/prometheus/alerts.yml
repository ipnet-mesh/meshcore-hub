# Prometheus alert rules for MeshCore Hub
#
# These rules are evaluated by Prometheus and fired alerts are sent
# to Alertmanager for routing and notification.

groups:
  - name: meshcore
    rules:
      - alert: NodeNotSeen
        expr: time() - meshcore_node_last_seen_timestamp_seconds{role="infra"} > 48 * 3600
        for: 5m
        labels:
          severity: warning
        annotations:
          summary: "Node {{ $labels.node_name }} ({{ $labels.role }}) not seen for 48+ hours"
          description: "Node {{ $labels.public_key }} ({{ $labels.adv_type }}, role={{ $labels.role }}) last seen {{ $value | humanizeDuration }} ago."
